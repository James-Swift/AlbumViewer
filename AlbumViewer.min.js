var AlbumViewer=AlbumViewer||function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=0;return n=!(!navigator.userAgent.match(/\bMSIE\b/)||document.documentMode&&!(document.documentMode<9)),o=!(!/\bMSIE 6/.test(navigator.userAgent)&&!/\bMSIE 7/.test(navigator.userAgent)||window.opera),a=function(a){if(!(this instanceof AlbumViewer))throw new Error('Constructor called as a function. (In other words you forgot the "new" keyword.)');var n=this,o={};if(p+=1,n.blankImage=a.blankImage||"http://james-swift.com/images/blank.gif",n.fadeStep=a.fadeStep||2,n.fadeTime=a.fadeTime||12,n.slideshowDelay=a.slideshowDelay||5e3,n.slideshowRandom=a.slideshowRandom||!1,n.endlessAlbum=void 0===a.endlessAlbum||a.endlessAlbum===!0,n.fadeBoth=a.fadeBoth||!0,o.c1={},o.c2={},o.slideshowStopped=!0,o.instanceID=p,o.enableLinks=void 0===a.enableLinks||a.enableLinks===!0,o.loading=!1,o.loadingStartedCalled=!1,n.selectedImageID=null,n.selectedImageSrc=null,n.history=[],null!==a.container&&null!==document.getElementById(a.container)&&(o.c0=document.getElementById(a.container),b(o,n),a.container1="AlbumViewer_"+o.instanceID+"_t1",a.link1="AlbumViewer_"+o.instanceID+"_l1",a.img1="AlbumViewer_"+o.instanceID+"_i1",a.container2="AlbumViewer_"+o.instanceID+"_t2",a.link2="AlbumViewer_"+o.instanceID+"_l2",a.img2="AlbumViewer_"+o.instanceID+"_i2"),null===document.getElementById(a.container1)||null===document.getElementById(a.img1)||null===document.getElementById(a.container2)||null===document.getElementById(a.img2)||o.enableLinks!==!1&&(null===document.getElementById(a.link1)||null===document.getElementById(a.link2)))throw{name:"Error",message:"Not all elements could be found. Please check the correct element id has been specified. Unable to load album viewer."};return o.c1.table=document.getElementById(a.container1),o.c1.img=document.getElementById(a.img1),o.c2.table=document.getElementById(a.container2),o.c2.img=document.getElementById(a.img2),o.enableLinks===!0&&(o.c1.link=document.getElementById(a.link1),o.c2.link=document.getElementById(a.link2)),null!==a.container&&(o.c1.img.style.width="auto",o.c1.img.style.height="auto",o.c2.img.style.width="auto",o.c2.img.style.height="auto"),n.args=a,n.onSwitchTo=function(){},n.loadingStarted=function(){},n.loadingComplete=function(){},n.getSrc=function(a){var b;return b=this.imagesAreArrays===!0?this.albumImages[a][this.imageNameField]:this.albumImages[a],null===this.albumLocation?b:this.albumLocation+b},n.getAlt=function(a){return this.imagesAreArrays===!0?this.albumImages[a][this.imageNameField].substr(this.albumImages[a][this.imageNameField].lastIndexOf("/")+1):this.albumImages[a].substr(this.albumImages[a].lastIndexOf("/")+1)},n.getLink=function(a){var b;return b=this.imagesAreArrays===!0?this.albumImages[a][this.imageNameField]:this.albumImages[a],null===this.albumLocation?b:this.albumLocation+b},n.loadAlbum=function(a){return c(a,o,n)},n.switchTo=function(a){return d(a,o,n)},n.safeImageID=function(a){return f(a,o,n)},n.findImageID=function(a){return g(a,o,n)},n.slideshowStart=function(a,b){return i(a,b,o,n)},n.slideshowStop=function(){return h(o,n)},n.slideshowToggle=function(){return j(o,n)},n.imageNext=function(){return k(o,n)},n.imagePrevious=function(){return l(o,n)},n.imageRandom=function(){return m(o,n)},o.fade=function(){return e(o,n)},n},b=function(a,b){var c,d={};for(a.c0.innerHTML="",c=1;c<=2;c+=1)d.table=document.createElement("table"),d.table.setAttribute("id","AlbumViewer_"+a.instanceID+"_t"+c),d.table.setAttribute("cellpadding","0"),d.table.setAttribute("cellspacing","0"),d.table.style.position="absolute",d.table.style.zIndex=c,d.table.style.verticalAlign="middle",d.table.style.textAlign="center",d.table.style.width="100%",d.table.style.height="100%",d.tbody=document.createElement("tbody"),d.tr=document.createElement("tr"),d.td=document.createElement("td"),a.enableLinks===!0?(d.a=document.createElement("a"),d.a.setAttribute("target","_blank"),d.a.setAttribute("id","AlbumViewer_"+a.instanceID+"_l"+c),d.img=document.createElement("img"),d.img.setAttribute("id","AlbumViewer_"+a.instanceID+"_i"+c),d.img.setAttribute("src",b.blankImage),d.img.setAttribute("alt","Loading"),d.a.appendChild(d.img),d.td.appendChild(d.a)):(d.img=document.createElement("img"),d.img.setAttribute("id","AlbumViewer_"+a.instanceID+"_i"+c),d.img.setAttribute("src",b.blankImage),d.img.setAttribute("alt","Loading"),d.td.appendChild(d.img)),d.tr.appendChild(d.td),d.tbody.appendChild(d.tr),d.table.appendChild(d.tbody),a.c0.appendChild(d.table);return!0},c=function(a,b,c){if("object"==typeof a){if("object"==typeof a.images){var d,e=a.images;a.images=[];for(d in e)e.hasOwnProperty(d)&&a.images.push(e[d])}if(a.name&&a.images&&a.images.length>0&&(null===a.location||"string"==typeof a.location))return c.slideshowStop(),c.albumName=a.name,c.albumImages=a.images,c.selectedImageID=null,c.selectedImageID=null,c.imageNameField=a.imageNameField||"name",c.imagesAreArrays=!1,"string"!=typeof c.albumImages[0]&&(c.imagesAreArrays=!0),null!==a.location?(a.location=a.location.replace(/\\/g,"/"),c.albumLocation="/"!==a.location.charAt(a.location.length-1)?a.location+"/":a.location):c.albumLocation=null,b.selectedImageID=-1,b.selectedContainer=1,b.c1.opacity=100,b.c2.opacity=0,b.imageNameField=c.imageNameField,b.imagesAreArrays=c.imagesAreArrays,n===!1?(b.c1.table.style.opacity=b.c1.opacity/100,b.c2.table.style.opacity=b.c2.opacity/100):(b.c1.table.style.filter="alpha(opacity="+b.c1.opacity+")",b.c2.table.style.filter="alpha(opacity="+b.c2.opacity+")"),!0}throw{name:"InvalidObject",message:"The album object you passed is invalid. Please make sure it contains the properties 'name','images' (and array of 1 or more image file names) and 'location' (the path to the folder containing the images)."}},d=function(a,b,c){return b.nextImageID=c.safeImageID(a),b.nextImageID===b.selectedImageID&&(c.slideshowRandom===!1||b.slideshowStopped===!1)||(b.selectedImageID>-1&&c.history.unshift(b.selectedImageID),c.selectedImageID=b.nextImageID,b.imagesAreArrays===!0?c.selectedImageSrc=c.albumImages[b.nextImageID][b.imageNameField]:c.selectedImageSrc=c.albumImages[b.nextImageID],b.loading=!0,setTimeout(function(){b.loading===!0&&b.loadingStartedCalled===!1&&(c.loadingStarted(),b.loadingStartedCalled=!0)},10),1===b.selectedContainer?(b.c2.img.onload=null,b.c2.img.src=c.blankImage,b.c2.img.onload=function(){clearTimeout(b.timer),b.fade(),null===b.c1.img.onload&&b.loading===!0&&(b.loadingStartedCalled=!1,b.loading=!1,c.loadingComplete())},b.c2.img.src=c.getSrc(b.nextImageID),b.c2.img.alt=c.getAlt(b.nextImageID),b.enableLinks===!0&&(b.c2.link.href=c.getLink(b.nextImageID))):(b.c1.img.onload=null,b.c1.img.src=c.blankImage,b.c1.img.onload=function(){b.timer=clearTimeout(b.timer),b.fade(),null===b.c2.img.onload&&b.loading===!0&&(b.loadingStartedCalled=!1,b.loading=!1,c.loadingComplete())},b.c1.img.src=c.getSrc(b.nextImageID),b.c1.img.alt=c.getAlt(b.nextImageID),b.enableLinks===!0&&(b.c1.link.href=c.getLink(b.nextImageID))),c.onSwitchTo(b.nextImageID),!0)},e=function(a,b){return 1===a.selectedContainer?(a.c1.opacity=a.c1.opacity-b.fadeStep,a.c2.opacity=a.c2.opacity+b.fadeStep):(a.c1.opacity=a.c1.opacity+b.fadeStep,a.c2.opacity=a.c2.opacity-b.fadeStep),a.c1.opacity=a.c1.opacity<0?0:a.c1.opacity>100?100:a.c1.opacity,a.c2.opacity=a.c2.opacity<0?0:a.c2.opacity>100?100:a.c2.opacity,n===!1?(b.fadeBoth===!0&&(a.c1.table.style.opacity=a.c1.opacity/100),a.c2.table.style.opacity=a.c2.opacity/100):(b.fadeBoth===!0&&(a.c1.table.style.filter="alpha(opacity="+a.c1.opacity+")"),a.c2.table.style.filter="alpha(opacity="+a.c2.opacity+")"),a.c1.opacity<=0?a.c1.table.style.display="none":o?a.c1.table.style.display="inline-block":a.c1.table.style.display="table",a.c2.opacity<=0?a.c2.table.style.display="none":o?a.c2.table.style.display="inline-block":a.c2.table.style.display="table",a.c1.opacity>0&&a.c1.opacity<100?a.timer=setTimeout(function(){a.fade()},b.fadeTime):(a.selectedImageID=a.nextImageID,1===a.selectedContainer?(a.c2.img.onload=null,a.selectedContainer=2,null===a.c1.img.onload&&(a.c1.img.src=b.getSrc(b.safeImageID(a.selectedImageID+1)))):(a.c1.img.onload=null,a.selectedContainer=1,null===a.c2.img.onload&&(a.c2.img.src=b.getSrc(b.safeImageID(a.selectedImageID+1)))),a.slideshowStopped!==!0&&(b.slideshowRandom===!1?a.timer=setTimeout(function(){b.imageNext()},b.slideshowDelay):a.timer=setTimeout(function(){b.imageRandom()},b.slideshowDelay))),!0},f=function(a,b,c){if(a>=c.albumImages.length&&(a=c.endlessAlbum?0:c.albumImages.length-1),a<0&&(a=c.endlessAlbum?c.albumImages.length-1:0),void 0===c.albumImages[a]){for(;void 0===c.albumImages[a]&&a<=c.albumImages.length;)a+=1;void 0===c.albumImages[a]&&(a=0)}return a},g=function(a,b,c){var d,e=0;if(b.imagesAreArrays!==!0)return c.safeImageID(c.albumImages.indexOf(a));for(d in c.albumImages)if(c.albumImages.hasOwnProperty(d)){if(c.albumImages[d][b.imageNameField]===a)return e;e+=1}return!1},h=function(a,b){return window.clearTimeout(a.timer),a.c1.img.onload=null,a.c2.img.onload=null,a.slideshowStopped=!0,b.slideshowStopped=!0,!0},i=function(a,b,c,d){return d.slideshowStop(),c.slideshowStopped=!1,d.slideshowStopped=!1,a===!0&&(d.slideshowRandom=!0),d.slideshowRandom===!0?d.switchTo(Math.floor(Math.random()*(d.albumImages.length-1))):c.selectedImageID===d.albumImages.length-1?d.switchTo(0):null===b||void 0===b?d.imageNext():d.switchTo(b),!0},j=function(a,b){return a.slideshowStopped===!0?b.slideshowStart():b.slideshowStop(),!0},k=function(a,b){return b.switchTo(a.selectedImageID+1),!0},l=function(a,b){return b.switchTo(a.selectedImageID-1),!0},m=function(a,b){var c=-1;if(b.albumImages.length>2){do c=Math.round(Math.random()*(b.albumImages.length-1));while(c===a.selectedImageID)}else c=a.selectedImageID+1;return b.switchTo(c),!0},Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=0|b;if(f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);c<e;){if(c in d&&d[c]===a)return c;c++}return-1}),a}();